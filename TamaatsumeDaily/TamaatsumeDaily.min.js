javascript:{const a='token-tamaatsume-201809',b='token-rentaisen-daily',f=8.64e7;let g={};class h{static valByKey(l){return decodeURIComponent(((document.cookie+';').match(l+'=([^\xA5S;]*)')||[])[1])}static strToJSON(l){return'string'==typeof l?JSON.parse(l):{}}static get tama(){return this.strToJSON(this.valByKey(a)).tama}static get time(){return this.strToJSON(this.valByKey(b)).time}static get todayTama(){return this.strToJSON(this.valByKey(b)).tama}static write(l,m){document.cookie=l+'='+m+'; max-age=86400',console.info('TamaatsumeCokkie.write: '+this.valByKey(l))}static delete(l){document.cookie=l+'=; max-age=0'}}class i{constructor(l){this.date=l,this.dateHash={year:this.date.getFullYear(),month:this.date.getMonth(),date:this.date.getDate(),hour:this.date.getHours()},this.time=l.getTime()}get reseted(){let l=new Date(this.dateHash.year,this.dateHash.month,this.dateHash.date,5).getTime();return 5<=this.dateHash.hour?l:l-f}isNextDay(l){return!!(l+f<=this.time)}}try{if(!location.href.match('deltarium.org/tokenranbu/tamaatsume/')||!h.valByKey(a))throw new Error('\u3053\u306E\u30B9\u30AF\u30EA\u30D7\u30C8\u306F\u300C\u5200\u5263\u4E71\u821E\u7389\u96C6\u3081\u9032\u6357\u8868 ver 2.3\u300D\u4E0A\u3067\u306E\u307F\u52D5\u4F5C\u3057\u307E\u3059\u3002')}catch(l){alert(l.message)}let j=h.valByKey(b),k=new i(new Date());if('string'==!typeof j||0==j.length||'undefined'==j)console.info('First Run'),g={tama:h.tama,time:k.reseted},console.info(g),h.write(b,encodeURIComponent(JSON.stringify(g))),console.info(h.valByKey(b));else{console.info('Second or Later Run'),g=JSON.parse(j);try{if('number'!=typeof g.tama||'number'!=typeof g.time)throw new Error('\u5F53\u30B9\u30AF\u30EA\u30D7\u30C8\u306E\u30C7\u30FC\u30BF\u304C\u7834\u640D\u3057\u3066\u3044\u308B\u305F\u3081\u30EA\u30BB\u30C3\u30C8\u3057\u307E\u3059(\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044)')}catch(l){h.delete(b),alert(l.message)}k.isNextDay(g.time)?(console.info('Date Changed'),g={tama:h.tama,time:k.reseted},console.info(g),h.write(b,encodeURIComponent(JSON.stringify(g))),console.info(h.valByKey(b))):console.info('Same Date')}alert('\u4ECA\u65E5\u306F'+(h.tama-h.todayTama)+'\u500B\u96C6\u3081\u307E\u3057\u305F')}
